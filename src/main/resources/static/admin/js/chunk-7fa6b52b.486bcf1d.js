(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7fa6b52b"],{4920:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"c",(function(){return s}));n("b775"),n("b83f");var i=n("23f6");function a(t){return Object(i["a"])({url:"/api/admin/product_reviews/list",method:"post",data:t})}function r(t){return Object(i["a"])({url:"/api/admin/product_reviews/detail",method:"post",data:t})}function o(t){return Object(i["a"])({url:"/api/admin/product_reviews/reply",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/api/admin/product_reviews/recommend",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/api/admin/product_reviews/hidden",method:"post",data:t})}},d5f6:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticStyle:{margin:"10px 0","font-size":"14px","line-height":"30px"}},[n("el-row",{staticStyle:{"font-weight":"800"}},[t._v("\n      操作提示：\n    ")]),t._v(" "),n("el-row",[t._v("\n      1、用户对购买的商品进行评价后，会展示在这里。默认新增的评论暂时不显示，点击“显示”立即展示在对应商品详情页。\n    ")]),t._v(" "),n("el-row",[t._v("\n      2、可控制某条评价是否显示。\n    ")]),t._v(" "),n("el-row",[t._v("\n      3、可以对评论进行推荐，被推荐的评论排在前面。\n    ")])],1),t._v(" "),n("el-row",[n("div",{staticStyle:{float:"left"}},[t._v("\n      一共"+t._s(t.listData.length)+"条评论\n    ")]),t._v(" "),n("div",{staticStyle:{float:"right","line-height":"40px"}},[n("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"输入商品链接筛选"},model:{value:t.newParams.productUrl,callback:function(e){t.$set(t.newParams,"productUrl",e)},expression:"newParams.productUrl"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.change}},[t._v("筛选")])],1)]),t._v(" "),n("el-card",{staticStyle:{"margin-top":"10px"}},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.listData,"tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{prop:"productName",label:"商品信息",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("el-image",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.row.productPicUrl+"?imageView2/1/w/50/h/50/q/75"}}),t._v(" "),n("div",{staticStyle:{padding:"5px"}},[t._v("\n              "+t._s(e.row.productName)+"\n\n            ")])],1)]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"content",label:"评论内容","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"username",label:"用户","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{prop:"date",label:"评论时间","show-overflow-tooltip":""}}),t._v(" "),n("el-table-column",{attrs:{label:"推荐",align:"right",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(n){return t.changeIsRecommend(e.$index,e.row)}},model:{value:e.row.recommend,callback:function(n){t.$set(e.row,"recommend",n)},expression:"scope.row.recommend"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"显示",align:"right",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(n){return t.changeIsShow(e.$index,e.row)}},model:{value:e.row.hidden,callback:function(n){t.$set(e.row,"hidden",n)},expression:"scope.row.hidden"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"right",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(n){return t.handleToDetail(e.row)}}},[t._v("查看和回复 ")])]}}])})],1)],1),t._v(" "),n("el-row",{staticClass:"row-bg",staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"space-around"}},[n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}}),t._v(" "),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:function(e){return t.handlePage(-1)}}},[t._v("上一页")]),t._v(" "),n("el-button",[t._v(t._s(t.listNumber)+"/"+t._s(Math.ceil(t.pageCount/t.params.limit)))]),t._v(" "),n("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-right"},on:{click:function(e){return t.handlePage(1)}}},[t._v("下一页")])],1)],1)],1)},a=[],r=(n("ac6a"),n("96cf"),n("3b8d")),o=n("5c96"),l=(n("2f62"),n("4920")),s={data:function(){return{multipleSelection:[],params:{offset:0,limit:20},newParams:{productUrl:"",offset:0,limit:20},listData:[],pageCount:1,listNumber:1}},created:function(){this.load()},methods:{load:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.$myLoading.myLoading.loading(),t.next=3,Object(l["b"])(this.newParams);case 3:e=t.sent,this.listData=e.result.list,this.pageCount=e.result.count,this.$myLoading.myLoading.closeLoading();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),toggleSelection:function(t){var e=this;t?t.forEach((function(t){e.$refs.multipleTable.toggleRowSelection(t)})):this.$refs.multipleTable.clearSelection()},handlePage:function(t){if(this.listNumber+t<=0||this.listNumber+t>Math.ceil(this.pageCount/this.params.limit))return!1;this.listNumber=this.listNumber+t,this.newParams.offset=(this.listNumber-1)*this.newParams.limit,this.load()},change:function(){this.load()},handleSort:function(t,e,n){var i=0;if(i="top"===n?t-1:t+1,-1===i||i===this.listData.length)return!1;this.$store.commit("product/SWAP_LIST_DATA",{index:t,actionIndex:i}),this.$store.dispatch("product/swapData",{a_id:this.listData[i].id,b_id:this.listData[t].id})},handleSelectionChange:function(t){this.multipleSelection=t},changeIsShow:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["c"])({id:n.id,isHidden:n.hidden});case 2:t.sent,this.load();case 4:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),changeIsRecommend:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(l["d"])({id:n.id,isRecommend:n.recommend});case 2:t.sent,this.load();case 4:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),handleDelete:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=[],n=this.multipleSelection,i=0;i<n.length;i++)e.push(n[i].id);return a={isTrash:!0,idList:e},t.next=6,set_trash(a);case 6:t.sent,Object(o["Message"])({message:"放入回收站成功！",type:"success",duration:1e3}),this.load();case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleToDetail:function(t){this.$router.push({name:"reviewsDetail",params:{id:t.id}})}}},c=s,u=n("2877"),d=Object(u["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports}}]);