(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d80628e"],{9618:function(e,t,a){},b441:function(e,t,a){"use strict";a("9618")},f7ba:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-card",{staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"form",attrs:{"label-position":"top","label-width":"80px",model:e.form,rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"模板名称",prop:"name"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"计费方式",prop:"type"}},[a("el-radio-group",{on:{change:e.changeType},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{staticClass:"radio",attrs:{label:"3"}},[e._v("计件")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"1"}},[e._v("重量")]),e._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"2"}},[e._v("体积")])],1)],1)],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter((function(t){return e.handleAdd||t.name.toLowerCase().includes(e.handleAdd.toLowerCase())}))}},[a("el-table-column",{attrs:{prop:"code",align:"center",label:"配送区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e._f("areaFilters")(t.row.regionList))+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"billableQuantity",align:"center",width:"200px",label:"首"+e.first},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入内容",type:"text",onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'0')}else{this.value=this.value.replace(/\\D/g,'')}"},model:{value:t.row.billableQuantity,callback:function(a){e.$set(t.row,"billableQuantity",a)},expression:"scope.row.billableQuantity"}}),e._v("\n            "+e._s(e.unit)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"billablePrice",label:"运费",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:t.row.billablePrice,callback:function(a){e.$set(t.row,"billablePrice",a)},expression:"scope.row.billablePrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"additionQuantity",align:"center",width:"200px",label:"续"+e.Continued},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"请输入内容",type:"text",onkeyup:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'')}else{this.value=this.value.replace(/\\D/g,'')}",onafterpaste:"if(this.value.length==1){this.value=this.value.replace(/[^1-9]/g,'0')}else{this.value=this.value.replace(/\\D/g,'')}"},model:{value:t.row.additionQuantity,callback:function(a){e.$set(t.row,"additionQuantity",a)},expression:"scope.row.additionQuantity"}}),e._v(" "),a("span",[e._v(e._s(e.unit))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"additionPrice",align:"center",width:"150px",label:"运费"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入内容",type:"number"},model:{value:t.row.additionPrice,callback:function(a){e.$set(t.row,"additionPrice",a)},expression:"scope.row.additionPrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",width:"200px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("\n              设置地区\n            ")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("\n              删除\n            ")])]}}])})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",plain:"",icon:"el-icon-plus"},on:{click:function(t){return e.handleAdd()}},model:{value:e.handleAdd,callback:function(t){e.handleAdd=t},expression:"handleAdd"}},[e._v("\n          添加一行自定义区域\n        ")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("确认提交")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"50%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-transfer",{attrs:{titles:e.transferTitles,props:{key:"region_id",label:"region_name_display"},data:e.allValue},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmArea}},[e._v("确 定")])],1)],1)],1)},i=[],l=(a("a481"),a("96cf"),a("3b8d")),r=(a("6b54"),a("7f7f"),a("ac6a"),a("8a9d")),s=(a("2f62"),{filters:{areaFilters:function(e){if(0===e.length)return"无";var t=[];return e.forEach((function(e){t.push(e.regionName)})),t.join(",")}},data:function(){return{form:{id:"",name:"",type:"",itemList:[]},transferTitles:["全部地区","已选择地区"],tableData:[],pieces:"件数",heavy:"重",volume:"体积",piece:"件",stere:"立方米",g:"克",unit:"件",first:"件",Continued:"件数",dialogVisible:!1,allValue:[],selectValue:[],currentRow:"",currentIndex:"",allArea:[],rules:{name:[{required:!0,message:"请输入模板名称",trigger:"blur"}],type:[{required:!0,message:"请选择活动区域",trigger:"change"}]}}},created:function(){this.getAreaList();var e=this.$route.params.list;this.form.id=e.id,this.form.name=e.name,this.form.type=e.type.toString(),this.tableData=e.itemList,console.log(e)},methods:{changeType:function(){var e=this;this.$confirm("切换计价方式后，当前模板的运费信息将被清空，确定继续吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){switch(e.tableData=[],e.form.type){case"1":e.first=e.heavy,e.Continued=e.heavy,e.unit=e.g;break;case"2":e.first=e.volume,e.Continued=e.volume,e.unit=e.stere;break;case"3":e.first=e.pieces,e.Continued=e.pieces,e.unit=e.piece;break}}))},getAreaList:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["c"])({});case 2:t=e.sent,this.allValue=t.list_simple,this.allArea=t.list_simple;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleConfirmArea:function(){var e=this,t=[];this.selectValue.forEach((function(a){e.allValue.forEach((function(e){if(e.region_id===a){var n={regionId:"",regionName:""};n.regionId=e.region_id,n.regionName=e.region_name,t.push(n)}}))})),this.currentRow.regionList=t,this.tableData.splice(this.currentIndex,1,this.currentRow),this.selectValue=[],this.allValue=this.allArea,this.dialogVisible=!1},handleAdd:function(){var e={billableQuantity:0,billablePrice:0,additionQuantity:0,additionPrice:0,regionList:[]};this.tableData.push(e)},handleEdit:function(e,t){this.currentIndex=e,this.currentRow=t,this.dialogVisible=!0},handleDelete:function(e,t){this.tableData.splice(e,1)},handleCreate:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(a){var n,i,l,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=41;break}if(console.log(e.tableData),n=!0,0!==e.tableData.length){t.next=7;break}n=!1,t.next=29;break;case 7:i=0;case 8:if(!(i<e.tableData.length)){t.next=29;break}l=e.tableData[i],t.t0=regeneratorRuntime.keys(l);case 11:if((t.t1=t.t0()).done){t.next=26;break}if(s=t.t1.value,"regionList"!==s){t.next=19;break}if(0!==l[s].length){t.next=17;break}return n=!1,t.abrupt("break",26);case 17:t.next=24;break;case 19:if(!l.hasOwnProperty(s)){t.next=24;break}if(o=l[s],""!==o){t.next=24;break}return n=!1,t.abrupt("break",26);case 24:t.next=11;break;case 26:i++,t.next=8;break;case 29:if(n){t.next=33;break}e.$message({type:"warning",message:"模板中有未填写的值，请检查后提交！"}),t.next=39;break;case 33:return e.form.itemList=e.tableData,t.next=36,Object(r["a"])(e.form);case 36:t.sent,e.$message({message:"修改完毕！",type:"success"}),e.$router.replace({path:"/delivery/config"});case 39:t.next=42;break;case 41:return t.abrupt("return",!1);case 42:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}}),o=s,c=(a("b441"),a("2877")),u=Object(c["a"])(o,n,i,!1,null,"0de50854",null);t["default"]=u.exports}}]);